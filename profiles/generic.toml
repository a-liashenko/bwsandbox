[seccomp]
type = "include"
include = "$XDG_CONFIG_HOME/bwsandbox/generic-seccomp.toml"

[dbus]
type = "include"
include = "$XDG_CONFIG_HOME/bwsandbox/generic-dbus.toml"

[bwrap.template]
name = "generic.j2"
dir = "$XDG_CONFIG_HOME/bwsandbox/templates"

[bwrap.template.context]
SANDBOXED_HOME = { type = "env", value = "$HOME/games-rt" }

SRC_HOME = { type = "env", value = "$HOME" }
DST_HOME = { type = "env", value = "$HOME" }

SRC_XDG_RUNTIME_DIR = { type = "env", value = "$XDG_RUNTIME_DIR" }
DST_XDG_RUNTIME_DIR = { type = "env", value = "$XDG_RUNTIME_DIR" }

WAYLAND_DISPLAY = { type = "env", value = "$WAYLAND_DISPLAY" }

[env_mapper]
type = 'inline'
keep = [
    'LANG',
    'LANGUAGE',
    'TERM',
    'COLORTERM',

    'APPIMAGE_EXTRACT_AND_RUN',

    'WAYLAND_DISPLAY',
    'DISPLAY',

    'XDG_SESSION_TYPE',
    'XDG_SESSION_DESKTOP',
    'XDG_CURRENT_DESKTOP',

    'XDG_RUNTIME_DIR',
    'DBUS_SESSION_BUS_ADDRESS',
    'XDG_CONFIG_HOME',
    'XDG_DATA_HOME',
    'XDG_CACHE_HOME',
    'XDG_STATE_HOME',

    'XCURSOR_THEME',
    'XCURSOR_SIZE',
    'HYPRCURSOR_SIZE',

    'MOZ_ENABLE_WAYLAND',
    'QT_QPA_PLATFORM',
    'QT_QPA_PLATFORMTHEME',
    'QT_WAYLAND_DISABLE_WINDOWDECORATION',
    'ELECTRON_OZONE_PLATFORM_HINT',
    '_JAVA_AWT_WM_NONREPARENTING',
]
